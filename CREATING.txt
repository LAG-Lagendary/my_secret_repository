Использование sudoers (Рекомендуется)

Настройка sudoers

Откройте файл sudoers:
sudo visudo

Добавьте строку в конец файла: Вставьте следующую строку, заменив ИМЯ ПОЛЬЗОВАТЕЛЯ  на ваше имя пользователя и /etc/openvpn/XXX.ovpn на ваш полный путь к файлу конфигурации:

# Разрешить пользователю ИМЯ ПОЛЬЗОВАТЕЛЯ  запускать openvpn с этой конфигурацией без пароля
ИМЯ ПОЛЬЗОВАТЕЛЯ ALL=(root) NOPASSWD: /usr/sbin/openvpn --config /etc/openvpn/XXX.ovpn

Создание Быстрых Команд (Алиасов)

После настройки sudoers вы можете создать две простые функции (алиасы) для включения и выключения.

    Откройте файл конфигурации вашей оболочки (например, ~/.bashrc для Bash или ~/.zshrc для Zsh):

Bash
    nano ~/.bashrc

Добавьте эти алиасы/функции в конец файла:


# Быстрая команда для ВКЛЮЧЕНИЯ VPN в фоне
function vpn_on() {
    sudo /usr/sbin/openvpn --config /etc/openvpn/XXX.ovpn &
}

# Быстрая команда для ВЫКЛЮЧЕНИЯ VPN (находит и убивает процесс)
function vpn_off() {
    # Ищет PID процесса OpenVPN, запущенного от root с этой конфигурацией
    PID=$(pgrep -f "openvpn --config /etc/openvpn/XXX.ovpn")

    if [ -n "$PID" ]; then
        sudo kill $PID
        echo "VPN выключен (PID: $PID)."
    else
        echo "VPN не запущен."
    fi
}

Сохраните файл и примените изменения:

source ~/.bashrc






